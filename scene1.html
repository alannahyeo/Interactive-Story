<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Scene 1</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Syne+Mono&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="scene1.css" />
</head>
<body class="fade-in">
  <div class="center-box">
    <h1 class="top-text">
      <span class="investigation-text">Investigation 1:</span>
      <span class="social-media-text">Eli's Social Media Feed</span>
    </h1>
    <div class="content-split">
      <div class="left-text">
        <div id="typewriter-text"></div>
        <p id="continuePrompt" class="continue-prompt" style="display: none;">Press To Continue</p>
      </div>
      <div class="right-empty">
        <img src="eli-missing-poster.png" alt="Eli's Social Media Feed" class="right-image"
     onerror="this.style.display='none'; console.error('Image not found')"/>
      </div>
    </div>
  </div>

  <audio id="fxAudio" src="typewriter-audio.mp3" preload="auto"></audio>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const fxAudio = document.getElementById('fxAudio');
    const textElement = document.getElementById('typewriter-text');
    const continuePrompt = document.getElementById('continuePrompt');

    const texts = [
      "Eli has mysteriously gone missing after a series of suspicious posts were shared on his social media feed...",
      "Authorities are scrambling to trace his digital footprint, but clues are vanishing as quickly as they appear.",
      "You've been tasked to dig deeper - to uncover the truth behind his disappearance and decode the feed."
    ];

    let currentIndex = 0;

    function typeWriterText(text, callback) {
      textElement.textContent = '';
      const cursor = document.createElement('span');
      cursor.className = 'typewriter-cursor';
      textElement.appendChild(cursor);

      let i = 0;
      const speed = 30;

      function typeNextChar() {
        if (i < text.length) {
          const charSpan = document.createElement('span');
          charSpan.textContent = text.charAt(i);
          textElement.insertBefore(charSpan, cursor);

          fxAudio.muted = false;
          fxAudio.play().catch(e => console.warn("Audio blocked by browser:", e));

          i++;
          setTimeout(typeNextChar, speed);
        } else {
          cursor.remove();
          console.log("Finished typing text:", text);
          if (callback) callback();
        }
      }

      typeNextChar();
    }

    function showNextText() {
      console.log("Current index:", currentIndex);
      if (currentIndex < texts.length) {
        continuePrompt.style.display = 'none';
        typeWriterText(texts[currentIndex], () => {
          if (currentIndex < texts.length - 1) {
            console.log("Showing continue button...");
            continuePrompt.style.display = 'inline-block';
          } else {
            console.log("Last message shown.");
            continuePrompt.style.display = 'none';
          }
        });
        currentIndex++;
      }
    }

    setTimeout(() => {
      showNextText();
    }, 600);

    continuePrompt.addEventListener('click', () => {
      console.log("Continue button clicked");
      showNextText();
    });
  });
</script>

</body>
</html>
